!function(e){var o={};function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,o,t){a.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:t})},a.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(o,"a",o),o},a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},a.p="/",a(a.s=60)}({60:function(e,o,a){e.exports=a(61)},61:function(e,o){function a(){$("#SideContainerItemsFixed").load(window.location.href+" #SideContainerItemsFixed"),$("#SideContainerItemsFloating").load(window.location.href+" #SideContainerItemsFloating"),$(".TotalCartItems").load(window.location.href+" .TotalCartItems"),$(".TotalCartItemsSidebar").load(window.location.href+" .TotalCartItemsSidebar"),$(".CartSubTotal").load(window.location.href+" .CartSubTotal"),$(".AvailableStock").load(window.location.href+" .AvailableStock")}$("#navfull-top-btn, #navfull-bottom-btn").click(function(){toggleNav()}),window.toggleNav=function(){var e=$(".MobileNavigation"),o=$("body"),a=$("#navfull-top-btn"),t=$("#navfull-bottom-btn"),n=$(".content-effect");e.hasClass("navfull-active")?(e.removeClass("navfull-active"),a.removeClass("navfull-top-active"),t.removeClass("navfull-bottom-active"),o.css("overflow","auto"),n.hide()):(e.addClass("navfull-active"),a.addClass("navfull-top-active"),t.addClass("navfull-bottom-active"),o.css("overflow","hidden"),n.fadeIn(500))},$(".loader-on-change").on("change",function(){return $("#full-loader").removeClass("Hidden"),!0}),$(".loader-on-submit").on("submit",function(){return $("#full-loader").removeClass("Hidden"),!0}),$(".dont-submit-on-enter, .dson").keypress(function(e){if(console.log("ENTER"),13==e.which)return!1;13==e.which&&e.preventDefault()}),window.collapseFilter=function(e){var o=e.siblings("ul");o.hasClass("collapsed")?(o.removeClass("collapsed"),o.show(100),e.html("-")):(o.addClass("collapsed"),o.hide(100),e.html("+"))},$(".InputBtnQ").on("change keyup",function(){var e=$(this).siblings(".ArticlePrice").val(),o=$(this).val(),a=e*o,t=$(this).parent().parent().parent().siblings(".TotalItemPrice");console.log(e,o,a),function(e,o,a){e.siblings(".InputBtnQ").removeClass("Hidden"),o.html("$ "+a)}($(this),t,a)}),$("#MainOverlay").click(function(){checkoutSidebar("hide")}),window.checkoutSidebar=function(e){var o=$(".CheckoutCart"),a=$(".main-wrapper"),t=function(){o.addClass("active"),a.addClass("allow-sidebar")},n=function(){o.removeClass("active"),a.removeClass("allow-sidebar")};if(void 0==e)o.hasClass("active")?n():t();else{if("show"==e)return t(),!1;if("hide"==e)return n(),!1}},window.openCheckoutDesktop=function(){return $(window).width()>768&&checkoutSidebar("show"),!1},window.openFilters=function(){var e=$("#SearchFilters"),o=$("#SearchFiltersTrigger");e.hasClass("active")?(e.removeClass("active"),o.show()):(e.addClass("active"),o.hide())},window.sumAllItems=function(){sum=0,$(".TotalItemPrice").each(function(e){sum+=parseInt($(this).html())}),$(".SubTotal").html(sum)},window.sumDivs=function(e,o){var a=0;e.each(function(){a+=parseFloat($(this).text())}),o.text(a)},window.checkVariantStock=function(){var e=$("#AddToCartForm"),o=e.serialize(),a=!1,t=$("#AddToCartFormBtn");return $.ajax({url:e.data("route"),method:"GET",dataType:"JSON",async:!1,data:o,success:function(e){1==e.response?("0"==e.message?($(".AvailableStock").html("No hay stock disponible"),t.prop("disabled",!0)):($(".AvailableStock").html("Stock disponible: "+e.message),t.prop("disabled",!1),a=!0),$("#MaxQuantity").prop("max",e.message)):($(".AvailableStock").html(e.message),t.prop("disabled",!0))},error:function(e){$("#Error").html(e.responseText),location.reload(),a=!1,t.prop("disabled",!0),console.log(e),console.log("Entro en error 2")}}),a},window.setItemsData=function(){itemData=[],$(".Item-Data").each(function(){var e=$(this).data("id"),o=$(this).data("price"),a=$(this).data("variant"),t=$(this).val();item={},item.id=e,item.variant_id=a,item.price=o,item.quantity=t,total=o*t,$("."+e+"-TotalItemPrice").html(total),itemData.push(item)}),sumAllItems(),$("#Items-Data").val(itemData)},window.addToCart=function(e,o){$.ajax({url:e,method:"POST",dataType:"JSON",data:o,success:function(e){"success"==e.response?($(".AvailableStock").html("Stock disponible: "+e.newStock),toast_success("Ok!",e.message,"bottomCenter","",2500),a(),setItemsData(),setTimeout(function(){setItemsData(),sumAllItems()},100)):"warning"==e.response&&toast_success("Ups!",e.message,"bottomCenter")},error:function(e){$("#Error").html(e.responseText),console.log("Error en addtoCart()"),console.log(e)}})},window.removeFromCart=function(e,o,t,n,s,l){$.ajax({url:e,method:"POST",dataType:"JSON",data:{cartItemId:o,variantId:t,quantity:n,action:l,method:"ajax"},success:function(e){"cart-removed"==e.response?(a(),window.location=window.location.href.split("?")[0],setItemsData()):"success"==e.response&&($(s).hide(100),$(s).remove(),a(),setItemsData())},error:function(e){console.log("Error en removeFromCart()"),console.log(e),location.reload()}})},window.submitCartToCheckout=function(e,o,a,t){$.ajax({url:e,method:"POST",dataType:"JSON",data:{data:a,action:t},success:function(e){console.log(e),"success"==e.response?(console.log(o),"reload"==o?window.location=window.location.href.split("?")[0]+"?checkout-on":window.location.href=o):(console.log("Error en submitForm"),console.log(e),toast_error("",e.message,"bottomCenter",""),$(".SideContainerError").html(e.message))},error:function(e){console.log("Error en submitForm()"),location.reload(),console.log(e)}})},window.validateAndSetCoupon=function(e,o,a){var t=$("#CouponDiv"),n=$("#SettedCoupon");console.log(o,a),$.ajax({url:e,method:"POST",dataType:"JSON",data:{code:o,cartid:a},beforeSend:function(){console.log("Comprobando cupón..."),$(".CouponLoader").removeClass("Hidden")},success:function(e){1==e.response?($("#CouponValidationMessage").html("Cupón aceptado !"),t.hide(200,function(){n.removeClass("Hidden")}),location.reload()):null==e.response&&$("#CouponValidationMessage").html(e.message)},error:function(e){$("#CouponValidationMessage").html(e.responseText),console.log(e)},complete:function(){$(".CouponLoader").addClass("Hidden")}})},window.addArticleToFavs=function(e,o,a,t,n){$.ajax({url:e,method:"POST",dataType:"JSON",data:{fav_id:o,article_id:a},success:function(e){if(1==e.response&&"added"==e.result)switch(t){case"reload":location.reload();break;case"show":n.removeClass("fav-icon-nofav"),n.addClass("fav-icon-isfav"),toast_success("Ok!","Producto agregado a favoritos","bottomCenter","",1e3);break;case"none":console.log("Actualizado - Sin Acción");default:console.log("No hay acción")}else 1==e.response&&"removed"==e.result&&(n.addClass("fav-icon-nofav"),n.removeClass("fav-icon-isfav"),toast_success("Ok!","Producto eliminado de favoritos","bottomCenter","",1e3));var o;(o=e.favsCount)>0?($(".FavMainIcon").removeClass("far"),$(".FavMainIcon").addClass("fa")):0==o?($(".FavMainIcon").removeClass("fa"),$(".FavMainIcon").addClass("far")):($(".FavMainIcon").removeClass("fa"),$(".FavMainIcon").removeClass("far"),$(".FavMainIcon").addClass("fa"),console.log("Error en setFavsTotalIcon()"))},error:function(e){$("#Error").html(e.responseText),console.log(e)}})},window.removeArticleFromFavs=function(e,o,a){var t=a;$.ajax({url:e,method:"POST",dataType:"JSON",data:{fav_id:o},success:function(e){if($("#Error").html(e.responseText),console.log(e),1==e.response)switch(console.log(t),t){case"reload":toast_success("Ok!","Producto eliminado de favoritos","bottomCenter","reload",1e3);break;default:console.log("No hay acción")}else console.log(e)},error:function(e){console.log(e)}})},window.removeAllArticlesFromFavs=function(e,o,a){$.ajax({url:e,method:"POST",dataType:"JSON",data:{customer_id:o},success:function(e){if(console.log(e),1==e.response)switch(a){case"reload":location.reload();break;default:console.log("No hay acción")}else $("#Error").html(e.message.errorInfo),console.log(e)},error:function(e){console.log(e)}})},$("#ResellerBox").hide(),window.openResellerRegistration=function(){$("#IsResellerCheckbox").prop("checked",!0),$(".IfResellerEnable").prop("disabled",!1),$("#ResellerBox").show(100),$("#ResellerCTA").hide(0),$(".NormaClientTitle").hide(0),$(".ResellerTitle").show(0)},window.closeResellerRegistration=function(){$("#IsResellerCheckbox").prop("checked",!1),$(".IfResellerEnable").prop("disabled",!0),$("#ResellerBox").hide(0),$("#ResellerCTA").show(100),$(".NormaClientTitle").show(0),$(".ResellerTitle").hide(0)},$(document).ready(function(){$(".GeoProvSelect").on("change",function(){var e=$(this).val();getGeoLocs(e)})}),window.closeElement=function(e){$(e).hide(100)},window.getParam=function(e){var o=null,a=[];return location.search.substr(1).split("&").forEach(function(t){(a=t.split("="))[0]===e&&(o=decodeURIComponent(a[1]))}),o},window.getParams=function(e){var o={},a=document.createElement("a");a.href=e;for(var t=a.search.substring(1).split("&"),n=0;n<t.length;n++){var s=t[n].split("=");o[s[0]]=decodeURIComponent(s[1])}return o}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgM2NhMGVmZGFkZTAxMWI0OGI2NzUiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2Fzc2V0cy9qcy9zdG9yZS9zY3JpcHRzLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ1cGRhdGVUb3RhbHMiLCIkIiwibG9hZCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImNsaWNrIiwidG9nZ2xlTmF2IiwibmF2IiwiYm9keSIsInRyaWdnZXIiLCJib3R0b21UcmlnZ2VyIiwiY29udGVudFRleHQiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiY3NzIiwiaGlkZSIsImFkZENsYXNzIiwiZmFkZUluIiwib24iLCJrZXlwcmVzcyIsImUiLCJjb25zb2xlIiwibG9nIiwid2hpY2giLCJwcmV2ZW50RGVmYXVsdCIsImNvbGxhcHNlRmlsdGVyIiwiZWxlbSIsImZpbHRlciIsInNpYmxpbmdzIiwic2hvdyIsImh0bWwiLCJ2YWx1ZSIsInRoaXMiLCJ2YWwiLCJxdWFudGl0eSIsIm5ld1ZhbHVlIiwibmV3UHJpY2VUYXJnZXQiLCJwYXJlbnQiLCJtb2RpZnlDYXJ0SXRlbVEiLCJjaGVja291dFNpZGViYXIiLCJzdGF0ZSIsInNpZGViYXIiLCJ3cmFwcGVyIiwidW5kZWZpbmVkIiwib3BlbkNoZWNrb3V0RGVza3RvcCIsIndpZHRoIiwib3BlbkZpbHRlcnMiLCJmaWx0ZXJzIiwic3VtQWxsSXRlbXMiLCJzdW0iLCJlYWNoIiwiaW5kZXgiLCJwYXJzZUludCIsInN1bURpdnMiLCJvcmlnaW5zIiwidGFyZ2V0IiwicGFyc2VGbG9hdCIsInRleHQiLCJjaGVja1ZhcmlhbnRTdG9jayIsImZvcm0iLCJkYXRhIiwic2VyaWFsaXplIiwiYWxsb3dTdWJtaXQiLCJzdWJtaXRCdXR0b24iLCJhamF4IiwidXJsIiwibWV0aG9kIiwiZGF0YVR5cGUiLCJhc3luYyIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsIm1lc3NhZ2UiLCJwcm9wIiwiZXJyb3IiLCJyZXNwb25zZVRleHQiLCJyZWxvYWQiLCJzZXRJdGVtc0RhdGEiLCJpdGVtRGF0YSIsImlkIiwicHJpY2UiLCJ2YXJpYW50X2lkIiwiaXRlbSIsInRvdGFsIiwicHVzaCIsImFkZFRvQ2FydCIsInJvdXRlIiwibmV3U3RvY2siLCJ0b2FzdF9zdWNjZXNzIiwic2V0VGltZW91dCIsInJlbW92ZUZyb21DYXJ0IiwiY2FydEl0ZW1JZCIsInZhcmlhbnRJZCIsImRpdiIsImFjdGlvbiIsInNwbGl0IiwicmVtb3ZlIiwic3VibWl0Q2FydFRvQ2hlY2tvdXQiLCJ0b2FzdF9lcnJvciIsInZhbGlkYXRlQW5kU2V0Q291cG9uIiwiY29kZSIsImNhcnRpZCIsImNvdXBvbkRpdiIsImNvdXBvblNldCIsImJlZm9yZVNlbmQiLCJjb21wbGV0ZSIsImFkZEFydGljbGVUb0ZhdnMiLCJmYXZpZCIsImFydGljbGVpZCIsImRpc3BsYXlCdXR0b24iLCJmYXZfaWQiLCJhcnRpY2xlX2lkIiwicmVzdWx0IiwiZmF2cyIsImZhdnNDb3VudCIsInJlbW92ZUFydGljbGVGcm9tRmF2cyIsImRvYWN0aW9uIiwicmVtb3ZlQWxsQXJ0aWNsZXNGcm9tRmF2cyIsImN1c3RvbWVyaWQiLCJjdXN0b21lcl9pZCIsIm9wZW5SZXNlbGxlclJlZ2lzdHJhdGlvbiIsImNsb3NlUmVzZWxsZXJSZWdpc3RyYXRpb24iLCJkb2N1bWVudCIsInJlYWR5IiwicHJvdl9pZCIsImdldEdlb0xvY3MiLCJjbG9zZUVsZW1lbnQiLCJzZWxlY3RvciIsImdldFBhcmFtIiwicGFyYW1ldGVyTmFtZSIsInRtcCIsInNlYXJjaCIsInN1YnN0ciIsImZvckVhY2giLCJkZWNvZGVVUklDb21wb25lbnQiLCJnZXRQYXJhbXMiLCJwYXJhbXMiLCJwYXJzZXIiLCJjcmVhdGVFbGVtZW50IiwidmFycyIsInN1YnN0cmluZyIsImxlbmd0aCIsInBhaXIiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWhCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQWlCLFdBQ0EsV0FBMkIsT0FBQWpCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFRLEVBQUFDLEdBQXNELE9BQUFSLE9BQUFTLFVBQUFDLGVBQUFqQixLQUFBYyxFQUFBQyxJQUd0RHRCLEVBQUF5QixFQUFBLElBR0F6QixJQUFBMEIsRUFBQSwyREMyUUEsU0FBU0MsSUFFTEMsRUFBRSw0QkFBNEJDLEtBQUtDLE9BQU9DLFNBQVNDLEtBQU8sNkJBQzFESixFQUFFLCtCQUErQkMsS0FBS0MsT0FBT0MsU0FBU0Ms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LFNBQVNyRSxHQUN4QixJQUFJc0UsS0FDSEMsRUFBU2YsU0FBU2dCLGNBQWMsS0FDcENELEVBQU9wSSxLQUFPNkQsRUFHZCxJQUZBLElBQ0l5RSxFQURRRixFQUFPTixPQUFPUyxVQUFVLEdBQ25CN0MsTUFBTSxLQUNkdEgsRUFBSSxFQUFHQSxFQUFJa0ssRUFBS0UsT0FBUXBLLElBQUssQ0FDckMsSUFBSXFLLEVBQU9ILEVBQUtsSyxHQUFHc0gsTUFBTSxLQUN6QnlDLEVBQU9NLEVBQUssSUFBTVIsbUJBQW1CUSxFQUFLLElBRTNDLE9BQU9OIiwiZmlsZSI6Ii9qcy9zY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDYwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAzY2EwZWZkYWRlMDExYjQ4YjY3NSIsIi8vXHJcbi8vIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyB8IE5hdmlnYXRpb25cclxuLy8gfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vXHJcbiQoJyNuYXZmdWxsLXRvcC1idG4sICNuYXZmdWxsLWJvdHRvbS1idG4nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIHRvZ2dsZU5hdigpO1xyXG59KTtcclxuXHJcbndpbmRvdy50b2dnbGVOYXYgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGNvbnN0IG5hdiA9ICQoJy5Nb2JpbGVOYXZpZ2F0aW9uJyk7XHJcbiAgICBjb25zdCBib2R5ID0gJCgnYm9keScpO1xyXG4gICAgY29uc3QgdHJpZ2dlciA9ICQoJyNuYXZmdWxsLXRvcC1idG4nKTtcclxuICAgIGNvbnN0IGJvdHRvbVRyaWdnZXIgPSAkKCcjbmF2ZnVsbC1ib3R0b20tYnRuJyk7XHJcbiAgICBjb25zdCBjb250ZW50VGV4dCA9ICQoJy5jb250ZW50LWVmZmVjdCcpO1xyXG5cclxuICAgIGlmKG5hdi5oYXNDbGFzcygnbmF2ZnVsbC1hY3RpdmUnKSlcclxuICAgIHtcclxuICAgICAgICBuYXYucmVtb3ZlQ2xhc3MoJ25hdmZ1bGwtYWN0aXZlJyk7XHJcbiAgICAgICAgdHJpZ2dlci5yZW1vdmVDbGFzcygnbmF2ZnVsbC10b3AtYWN0aXZlJyk7XHJcbiAgICAgICAgYm90dG9tVHJpZ2dlci5yZW1vdmVDbGFzcygnbmF2ZnVsbC1ib3R0b20tYWN0aXZlJyk7XHJcbiAgICAgICAgYm9keS5jc3MoJ292ZXJmbG93JywnYXV0bycpO1xyXG4gICAgICAgIGNvbnRlbnRUZXh0LmhpZGUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmF2LmFkZENsYXNzKCduYXZmdWxsLWFjdGl2ZScpO1xyXG4gICAgICAgIHRyaWdnZXIuYWRkQ2xhc3MoJ25hdmZ1bGwtdG9wLWFjdGl2ZScpO1xyXG4gICAgICAgIGJvdHRvbVRyaWdnZXIuYWRkQ2xhc3MoJ25hdmZ1bGwtYm90dG9tLWFjdGl2ZScpO1xyXG4gICAgICAgIGJvZHkuY3NzKCdvdmVyZmxvdycsJ2hpZGRlbicpO1xyXG4gICAgICAgIGNvbnRlbnRUZXh0LmZhZGVJbig1MDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLy8gTG9hZGVyc1xyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiQoXCIubG9hZGVyLW9uLWNoYW5nZVwiKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnI2Z1bGwtbG9hZGVyJykucmVtb3ZlQ2xhc3MoJ0hpZGRlbicpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn0pO1xyXG5cclxuJChcIi5sb2FkZXItb24tc3VibWl0XCIpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcjZnVsbC1sb2FkZXInKS5yZW1vdmVDbGFzcygnSGlkZGVuJyk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufSk7XHJcblxyXG4kKCcuZG9udC1zdWJtaXQtb24tZW50ZXIsIC5kc29uJykua2V5cHJlc3MoZnVuY3Rpb24gKGUpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiRU5URVJcIik7XHJcbiAgICBpZiAoZS53aGljaCA9PSAxMykgcmV0dXJuIGZhbHNlO1xyXG4gICAgaWYgKGUud2hpY2ggPT0gMTMpIGUucHJldmVudERlZmF1bHQoKTtcclxufSk7XHJcblxyXG4vLyBTdG9yZSBGaWx0ZXJzXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbndpbmRvdy5jb2xsYXBzZUZpbHRlciA9IGZ1bmN0aW9uKGVsZW0pIHtcclxuICAgIGNvbnN0IGZpbHRlciA9IGVsZW0uc2libGluZ3MoJ3VsJyk7XHJcbiAgICBpZihmaWx0ZXIuaGFzQ2xhc3MoJ2NvbGxhcHNlZCcpKVxyXG4gICAge1xyXG4gICAgICAgIGZpbHRlci5yZW1vdmVDbGFzcygnY29sbGFwc2VkJyk7XHJcbiAgICAgICAgZmlsdGVyLnNob3coMTAwKTtcclxuICAgICAgICBlbGVtLmh0bWwoJy0nKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICBmaWx0ZXIuYWRkQ2xhc3MoJ2NvbGxhcHNlZCcpO1xyXG4gICAgICAgIGZpbHRlci5oaWRlKDEwMCk7XHJcbiAgICAgICAgZWxlbS5odG1sKCcrJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vLyBNb2RpZnkgY2FydCBpdGVtIHF1YW50aXR5IFxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiQoJy5JbnB1dEJ0blEnKS5vbignY2hhbmdlIGtleXVwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gIE9yaWdpbmFsIEFydGljbGUgUHJpY2VcclxuICAgIGxldCB2YWx1ZSA9ICQodGhpcykuc2libGluZ3MoJy5BcnRpY2xlUHJpY2UnKS52YWwoKTtcclxuICAgIC8vIFF1YW50aXR5XHJcbiAgICBsZXQgcXVhbnRpdHkgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgLy8gTmVyIFZhbHVlXHJcbiAgICBsZXQgbmV3VmFsdWUgPSAodmFsdWUgKiBxdWFudGl0eSk7XHJcbiAgICAvLyBOZXcgUHJpY2UgVGFyZ2V0XHJcbiAgICBsZXQgbmV3UHJpY2VUYXJnZXQgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuVG90YWxJdGVtUHJpY2UnKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyh2YWx1ZSwgcXVhbnRpdHksIG5ld1ZhbHVlKTtcclxuICAgIG1vZGlmeUNhcnRJdGVtUSgkKHRoaXMpLCBuZXdQcmljZVRhcmdldCwgbmV3VmFsdWUpO1xyXG59KVxyXG5cclxuZnVuY3Rpb24gbW9kaWZ5Q2FydEl0ZW1RKGUsIG5ld1ByaWNlVGFyZ2V0LCBuZXdWYWx1ZSkge1xyXG4gICAgZS5zaWJsaW5ncygnLklucHV0QnRuUScpLnJlbW92ZUNsYXNzKCdIaWRkZW4nKTtcclxuICAgIG5ld1ByaWNlVGFyZ2V0Lmh0bWwoJyQgJyArIG5ld1ZhbHVlKTtcclxufVxyXG5cclxuXHJcbiQoJyNNYWluT3ZlcmxheScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICBjaGVja291dFNpZGViYXIoJ2hpZGUnKTtcclxufSlcclxuLy8gQ2hlY2tvdXQgc2lkZWJhclxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHRcdFxyXG53aW5kb3cuY2hlY2tvdXRTaWRlYmFyID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcblxyXG4gICAgY29uc3Qgc2lkZWJhciA9ICQoJy5DaGVja291dENhcnQnKTtcclxuICAgIGNvbnN0IHdyYXBwZXIgPSAkKCcubWFpbi13cmFwcGVyJyk7XHJcblxyXG4gICAgY29uc3Qgc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzaWRlYmFyLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB3cmFwcGVyLmFkZENsYXNzKCdhbGxvdy1zaWRlYmFyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzaWRlYmFyLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB3cmFwcGVyLnJlbW92ZUNsYXNzKCdhbGxvdy1zaWRlYmFyJyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChzdGF0ZSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAoc2lkZWJhci5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgaGlkZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09ICdzaG93Jykge1xyXG4gICAgICAgIHNob3coKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09ICdoaWRlJykge1xyXG4gICAgICAgIGhpZGUoKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxud2luZG93Lm9wZW5DaGVja291dERlc2t0b3AgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDc2OCkge1xyXG4gICAgICAgIGNoZWNrb3V0U2lkZWJhcignc2hvdycpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG53aW5kb3cub3BlbkZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBmaWx0ZXJzID0gJCgnI1NlYXJjaEZpbHRlcnMnKTtcclxuICAgIGNvbnN0IHRyaWdnZXIgPSAkKCcjU2VhcmNoRmlsdGVyc1RyaWdnZXInKTtcclxuICAgIGlmKGZpbHRlcnMuaGFzQ2xhc3MoJ2FjdGl2ZScpKVxyXG4gICAge1xyXG4gICAgICAgIGZpbHRlcnMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIHRyaWdnZXIuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIGZpbHRlcnMuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIHRyaWdnZXIuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcbi8qXHJcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG58IENBUlRcclxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiovXHJcblxyXG5cclxud2luZG93LnN1bUFsbEl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgc3VtID0gMDtcclxuICAgICQoJy5Ub3RhbEl0ZW1QcmljZScpLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgc3VtICs9IHBhcnNlSW50KCQodGhpcykuaHRtbCgpKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLlN1YlRvdGFsJykuaHRtbChzdW0pO1xyXG59XHJcblxyXG5cclxuLy8gU3VtIGRpdnMgdGV4dFxyXG53aW5kb3cuc3VtRGl2cyA9IGZ1bmN0aW9uIChvcmlnaW5zLCB0YXJnZXQpIHtcclxuICAgIGxldCBzdW0gPSAwO1xyXG4gICAgb3JpZ2lucy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzdW0gKz0gcGFyc2VGbG9hdCgkKHRoaXMpLnRleHQoKSk7XHJcbiAgICB9KTtcclxuICAgIHRhcmdldC50ZXh0KHN1bSk7XHJcbn1cclxuXHJcblxyXG4vLyBDaGVjayBwcm9kdWN0IHZhcmlhbnQgc3RvY2tcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG53aW5kb3cuY2hlY2tWYXJpYW50U3RvY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIGxldCBmb3JtID0gJCgnI0FkZFRvQ2FydEZvcm0nKTtcclxuICAgIGxldCBkYXRhID0gZm9ybS5zZXJpYWxpemUoKTtcclxuICAgIGxldCBhbGxvd1N1Ym1pdCA9IGZhbHNlO1xyXG4gICAgbGV0IHN1Ym1pdEJ1dHRvbiA9ICAkKCcjQWRkVG9DYXJ0Rm9ybUJ0bicpO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IGZvcm0uZGF0YSgncm91dGUnKSxcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYoZGF0YS5yZXNwb25zZSA9PSB0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLm1lc3NhZ2UgPT0gJzAnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLkF2YWlsYWJsZVN0b2NrJykuaHRtbChcIk5vIGhheSBzdG9jayBkaXNwb25pYmxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXRCdXR0b24ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5BdmFpbGFibGVTdG9jaycpLmh0bWwoXCJTdG9jayBkaXNwb25pYmxlOiBcIiArIGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dTdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkVudHJvIGVuIFNVQ0NFU1NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnI01heFF1YW50aXR5JykucHJvcChcIm1heFwiLCBkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKCcjRXJyb3InKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgICQoJy5BdmFpbGFibGVTdG9jaycpLmh0bWwoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgJCgnI0Vycm9yJykuaHRtbChkYXRhLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICBhbGxvd1N1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzdWJtaXRCdXR0b24ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRW50cm8gZW4gZXJyb3IgMlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBhbGxvd1N1Ym1pdDtcclxufVxyXG5cclxuLy8gU2V0IGNhcnQgaXRlbXMgSlNPTlxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbndpbmRvdy5zZXRJdGVtc0RhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpdGVtRGF0YSA9IFtdO1xyXG5cclxuICAgICQoJy5JdGVtLURhdGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgaWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgbGV0IHByaWNlID0gJCh0aGlzKS5kYXRhKCdwcmljZScpO1xyXG4gICAgICAgIGxldCB2YXJpYW50X2lkID0gJCh0aGlzKS5kYXRhKCd2YXJpYW50Jyk7XHJcbiAgICAgICAgbGV0IHF1YW50aXR5ID0gJCh0aGlzKS52YWwoKTtcclxuXHJcbiAgICAgICAgaXRlbSA9IHt9XHJcbiAgICAgICAgaXRlbVsnaWQnXSA9IGlkO1xyXG4gICAgICAgIGl0ZW1bJ3ZhcmlhbnRfaWQnXSA9IHZhcmlhbnRfaWQ7XHJcbiAgICAgICAgaXRlbVsncHJpY2UnXSA9IHByaWNlO1xyXG4gICAgICAgIGl0ZW1bJ3F1YW50aXR5J10gPSBxdWFudGl0eTtcclxuICAgICAgICAvLyBVcGRhdGUgZGlzcGxheSB0b3RhbCBpdGVtIHByaWNlXHJcbiAgICAgICAgdG90YWwgPSBwcmljZSAqIHF1YW50aXR5O1xyXG4gICAgICAgICQoJy4nICsgaWQgKyAnLVRvdGFsSXRlbVByaWNlJykuaHRtbCh0b3RhbCk7XHJcblxyXG4gICAgICAgIGl0ZW1EYXRhLnB1c2goaXRlbSk7XHJcbiAgICB9KTtcclxuICAgIC8vIFVwZGF0ZSBUb3RhbFxyXG4gICAgLy8gY29uc29sZS5pbmZvKGl0ZW1EYXRhKTtcclxuICAgIHN1bUFsbEl0ZW1zKCk7XHJcbiAgICAkKCcjSXRlbXMtRGF0YScpLnZhbChpdGVtRGF0YSk7XHJcbn1cclxuXHJcbi8vIEFkZCBwcm9kdWN0IHRvIGNhcnRcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG53aW5kb3cuYWRkVG9DYXJ0ID0gZnVuY3Rpb24gKHJvdXRlLCBkYXRhKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogcm91dGUsXHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdKU09OJyxcclxuICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNwb25zZSA9PSAnc3VjY2VzcycpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgJCgnLkF2YWlsYWJsZVN0b2NrJykuaHRtbChcIlN0b2NrIGRpc3BvbmlibGU6IFwiICsgZGF0YS5uZXdTdG9jayk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdF9zdWNjZXNzKCdPayEnLCBkYXRhLm1lc3NhZ2UsICdib3R0b21DZW50ZXInLCAnJywgMjUwMCk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbHMoKTtcclxuICAgICAgICAgICAgICAgIHNldEl0ZW1zRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SXRlbXNEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VtQWxsSXRlbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBvcGVuQ2hlY2tvdXREZXNrdG9wKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEucmVzcG9uc2UgPT0gJ3dhcm5pbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB0b2FzdF9zdWNjZXNzKCdVcHMhJywgZGF0YS5tZXNzYWdlLCAnYm90dG9tQ2VudGVyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAkKCcjRXJyb3InKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBlbiBhZGR0b0NhcnQoKVwiKTtcclxuICAgICAgICAgICAgLy8gbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy8gUmVtb3ZlIHByb2R1Y3QgZnJvbSBjYXJ0XHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxud2luZG93LnJlbW92ZUZyb21DYXJ0ID0gZnVuY3Rpb24gKHJvdXRlLCBjYXJ0SXRlbUlkLCB2YXJpYW50SWQsIHF1YW50aXR5LCBkaXYsIGFjdGlvbikge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IHJvdXRlLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXHJcbiAgICAgICAgZGF0YTogeyBjYXJ0SXRlbUlkOiBjYXJ0SXRlbUlkLCB2YXJpYW50SWQ6IHZhcmlhbnRJZCwgcXVhbnRpdHk6IHF1YW50aXR5LCBhY3Rpb246IGFjdGlvbiwgbWV0aG9kOiAnYWpheCcgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNwb25zZSA9PSAnY2FydC1yZW1vdmVkJykge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbHMoKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiP1wiKVswXTtcclxuICAgICAgICAgICAgICAgIHNldEl0ZW1zRGF0YSgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEucmVzcG9uc2UgPT0gJ3N1Y2Nlc3MnKSB7XHJcbiAgICAgICAgICAgICAgICAkKGRpdikuaGlkZSgxMDApO1xyXG4gICAgICAgICAgICAgICAgJChkaXYpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlVG90YWxzKCk7XHJcbiAgICAgICAgICAgICAgICBzZXRJdGVtc0RhdGEoKTtcclxuICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vJCgnI0Vycm9yJykuaHRtbChkYXRhLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZW4gcmVtb3ZlRnJvbUNhcnQoKVwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIC8vIElmIGFuIGVycm9yIHBvcHMgd2hlbiBkZXN0cm95aW5nIGFuIGl0ZW0sIHJlbG9hZCBhbmQgcHJldmVudCBiYWQgbWFnaWNcclxuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVRvdGFscygpIHtcclxuICAgIC8vIExpdmUgUmVsb2FkaW5nIHN0dWZmXHJcbiAgICAkKFwiI1NpZGVDb250YWluZXJJdGVtc0ZpeGVkXCIpLmxvYWQod2luZG93LmxvY2F0aW9uLmhyZWYgKyBcIiAjU2lkZUNvbnRhaW5lckl0ZW1zRml4ZWRcIik7XHJcbiAgICAkKFwiI1NpZGVDb250YWluZXJJdGVtc0Zsb2F0aW5nXCIpLmxvYWQod2luZG93LmxvY2F0aW9uLmhyZWYgKyBcIiAjU2lkZUNvbnRhaW5lckl0ZW1zRmxvYXRpbmdcIik7XHJcbiAgICAkKFwiLlRvdGFsQ2FydEl0ZW1zXCIpLmxvYWQod2luZG93LmxvY2F0aW9uLmhyZWYgKyBcIiAuVG90YWxDYXJ0SXRlbXNcIik7XHJcbiAgICAkKFwiLlRvdGFsQ2FydEl0ZW1zU2lkZWJhclwiKS5sb2FkKHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgXCIgLlRvdGFsQ2FydEl0ZW1zU2lkZWJhclwiKTtcclxuICAgICQoXCIuQ2FydFN1YlRvdGFsXCIpLmxvYWQod2luZG93LmxvY2F0aW9uLmhyZWYgKyBcIiAuQ2FydFN1YlRvdGFsXCIpO1xyXG4gICAgJChcIi5BdmFpbGFibGVTdG9ja1wiKS5sb2FkKHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgXCIgLkF2YWlsYWJsZVN0b2NrXCIpO1xyXG59XHJcblxyXG4vLyBTdWJtaXQgQ2FydCBGb3JtIHRvIENoZWNrb3V0XHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxud2luZG93LnN1Ym1pdENhcnRUb0NoZWNrb3V0ID0gZnVuY3Rpb24gKHJvdXRlLCB0YXJnZXQsIGRhdGEsIGFjdGlvbikge1xyXG4gICAgLy9jb25zb2xlLmxvZyhcIlJ1dGE6IFwiICsgcm91dGUgKyBcIiBUYXJnZXQ6IFwiICsgdGFyZ2V0ICsgXCIgRGF0YTogXCIgKyBkYXRhICsgXCJBY3Rpb246IFwiKyBhY3Rpb24pO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IHJvdXRlLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXHJcbiAgICAgICAgZGF0YTogeyBkYXRhLCBhY3Rpb246IGFjdGlvbiB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNwb25zZSA9PSAnc3VjY2VzcycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ID09ICdyZWxvYWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVmcmVzaCBwYWdlLCBkZWxldGUgcGFyYW1ldHRlcnMgYW5kIG9wZW4gY2hlY2tvdXQgc2lkZWJhclxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiP1wiKVswXSArIFwiP2NoZWNrb3V0LW9uXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGVuIHN1Ym1pdEZvcm0nKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdG9hc3RfZXJyb3IoJycsIGRhdGEubWVzc2FnZSwgJ2JvdHRvbUNlbnRlcicsICcnKTtcclxuICAgICAgICAgICAgICAgICQoJy5TaWRlQ29udGFpbmVyRXJyb3InKS5odG1sKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKCcjRXJyb3InKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAkKCcjRXJyb3InKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAvLyAkKCcjRXJyb3InKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBlbiBzdWJtaXRGb3JtKClcIik7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgLy8gbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIFZhbGlkYXRlIGFuZCBzZXQgY291cG9uXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxud2luZG93LnZhbGlkYXRlQW5kU2V0Q291cG9uID0gZnVuY3Rpb24gKHJvdXRlLCBjb2RlLCBjYXJ0aWQpIHtcclxuICAgIGxldCBjb3Vwb25EaXYgPSAkKCcjQ291cG9uRGl2Jyk7XHJcbiAgICBsZXQgY291cG9uU2V0ID0gJCgnI1NldHRlZENvdXBvbicpO1xyXG4gICAgY29uc29sZS5sb2coY29kZSwgY2FydGlkKTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiByb3V0ZSxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBkYXRhVHlwZTogJ0pTT04nLFxyXG4gICAgICAgIGRhdGE6IHsgY29kZTogY29kZSwgY2FydGlkOiBjYXJ0aWQgfSxcclxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29tcHJvYmFuZG8gY3Vww7NuLi4uXCIpO1xyXG4gICAgICAgICAgICAkKCcuQ291cG9uTG9hZGVyJykucmVtb3ZlQ2xhc3MoJ0hpZGRlbicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEucmVzcG9uc2UgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgJCgnI0NvdXBvblZhbGlkYXRpb25NZXNzYWdlJykuaHRtbChcIkN1cMOzbiBhY2VwdGFkbyAhXCIpO1xyXG4gICAgICAgICAgICAgICAgY291cG9uRGl2LmhpZGUoMjAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291cG9uU2V0LnJlbW92ZUNsYXNzKCdIaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5yZXNwb25zZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjQ291cG9uVmFsaWRhdGlvbk1lc3NhZ2UnKS5odG1sKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAkKCcjQ291cG9uVmFsaWRhdGlvbk1lc3NhZ2UnKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuQ291cG9uTG9hZGVyJykuYWRkQ2xhc3MoJ0hpZGRlbicpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyBGYXZzXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxud2luZG93LmFkZEFydGljbGVUb0ZhdnMgPSBmdW5jdGlvbiAocm91dGUsIGZhdmlkLCBhcnRpY2xlaWQsIGFjdGlvbiwgZGlzcGxheUJ1dHRvbikge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IHJvdXRlLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXHJcbiAgICAgICAgZGF0YTogeyBmYXZfaWQ6IGZhdmlkLCBhcnRpY2xlX2lkOiBhcnRpY2xlaWQgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNwb25zZSA9PSB0cnVlICYmIGRhdGEucmVzdWx0ID09ICdhZGRlZCcpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVsb2FkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3cnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5QnV0dG9uLnJlbW92ZUNsYXNzKCdmYXYtaWNvbi1ub2ZhdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5QnV0dG9uLmFkZENsYXNzKCdmYXYtaWNvbi1pc2ZhdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdF9zdWNjZXNzKCdPayEnLCAnUHJvZHVjdG8gYWdyZWdhZG8gYSBmYXZvcml0b3MnLCAnYm90dG9tQ2VudGVyJywgJycsIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdub25lJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FjdHVhbGl6YWRvIC0gU2luIEFjY2nDs24nKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gaGF5IGFjY2nDs24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5yZXNwb25zZSA9PSB0cnVlICYmIGRhdGEucmVzdWx0ID09ICdyZW1vdmVkJykge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheUJ1dHRvbi5hZGRDbGFzcygnZmF2LWljb24tbm9mYXYnKTtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlCdXR0b24ucmVtb3ZlQ2xhc3MoJ2Zhdi1pY29uLWlzZmF2Jyk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdF9zdWNjZXNzKCdPayEnLCAnUHJvZHVjdG8gZWxpbWluYWRvIGRlIGZhdm9yaXRvcycsICdib3R0b21DZW50ZXInLCAnJywgMTAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0RmF2c1RvdGFsSWNvbihkYXRhLmZhdnNDb3VudCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgJCgnI0Vycm9yJykuaHRtbChkYXRhLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRGYXZzVG90YWxJY29uKGZhdnMpIHtcclxuICAgIGlmIChmYXZzID4gMCkge1xyXG4gICAgICAgICQoJy5GYXZNYWluSWNvbicpLnJlbW92ZUNsYXNzKCdmYXInKTtcclxuICAgICAgICAkKCcuRmF2TWFpbkljb24nKS5hZGRDbGFzcygnZmEnKTtcclxuICAgIH0gZWxzZSBpZiAoZmF2cyA9PSAwKSB7XHJcbiAgICAgICAgJCgnLkZhdk1haW5JY29uJykucmVtb3ZlQ2xhc3MoJ2ZhJyk7XHJcbiAgICAgICAgJCgnLkZhdk1haW5JY29uJykuYWRkQ2xhc3MoJ2ZhcicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcuRmF2TWFpbkljb24nKS5yZW1vdmVDbGFzcygnZmEnKTtcclxuICAgICAgICAkKCcuRmF2TWFpbkljb24nKS5yZW1vdmVDbGFzcygnZmFyJyk7XHJcbiAgICAgICAgJCgnLkZhdk1haW5JY29uJykuYWRkQ2xhc3MoJ2ZhJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBlbiBzZXRGYXZzVG90YWxJY29uKClcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5yZW1vdmVBcnRpY2xlRnJvbUZhdnMgPSBmdW5jdGlvbiAocm91dGUsIGZhdmlkLCBhY3Rpb24pIHtcclxuICAgIHZhciBkb2FjdGlvbiA9IGFjdGlvbjtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiByb3V0ZSxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBkYXRhVHlwZTogJ0pTT04nLFxyXG4gICAgICAgIGRhdGE6IHsgZmF2X2lkOiBmYXZpZCB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICQoJyNFcnJvcicpLmh0bWwoZGF0YS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEucmVzcG9uc2UgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZG9hY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChkb2FjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbG9hZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAncmVsb2FkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3Rfc3VjY2VzcygnT2shJywgJ1Byb2R1Y3RvIGVsaW1pbmFkbyBkZSBmYXZvcml0b3MnLCAnYm90dG9tQ2VudGVyJywgYWN0aW9uLCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIGhheSBhY2Npw7NuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8kKCcjRXJyb3InKS5odG1sKGRhdGEubWVzc2FnZVsnZXJyb3JJbmZvJ10pO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAvLyQoJyNFcnJvcicpLmh0bWwoZGF0YS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxud2luZG93LnJlbW92ZUFsbEFydGljbGVzRnJvbUZhdnMgPSBmdW5jdGlvbiAocm91dGUsIGN1c3RvbWVyaWQsIGFjdGlvbikge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IHJvdXRlLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXHJcbiAgICAgICAgZGF0YTogeyBjdXN0b21lcl9pZDogY3VzdG9tZXJpZCB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAvLyQoJyNFcnJvcicpLmh0bWwoZGF0YS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNwb25zZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbG9hZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gaGF5IGFjY2nDs24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjRXJyb3InKS5odG1sKGRhdGEubWVzc2FnZVsnZXJyb3JJbmZvJ10pO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAvLyQoJyNFcnJvcicpLmh0bWwoZGF0YS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbnwgTE9HSU4gQU5EIFJFR0lTVEVSXHJcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4qL1xyXG5cclxuJCgnI1Jlc2VsbGVyQm94JykuaGlkZSgpO1xyXG5cclxud2luZG93Lm9wZW5SZXNlbGxlclJlZ2lzdHJhdGlvbiA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgJCgnI0lzUmVzZWxsZXJDaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICQoJy5JZlJlc2VsbGVyRW5hYmxlJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAkKCcjUmVzZWxsZXJCb3gnKS5zaG93KDEwMCk7XHJcbiAgICAkKCcjUmVzZWxsZXJDVEEnKS5oaWRlKDApO1xyXG4gICAgJCgnLk5vcm1hQ2xpZW50VGl0bGUnKS5oaWRlKDApO1xyXG4gICAgJCgnLlJlc2VsbGVyVGl0bGUnKS5zaG93KDApO1xyXG59XHJcblxyXG53aW5kb3cuY2xvc2VSZXNlbGxlclJlZ2lzdHJhdGlvbiA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgJCgnI0lzUmVzZWxsZXJDaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAkKCcuSWZSZXNlbGxlckVuYWJsZScpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAkKCcjUmVzZWxsZXJCb3gnKS5oaWRlKDApO1xyXG4gICAgJCgnI1Jlc2VsbGVyQ1RBJykuc2hvdygxMDApO1xyXG4gICAgJCgnLk5vcm1hQ2xpZW50VGl0bGUnKS5zaG93KDApO1xyXG4gICAgJCgnLlJlc2VsbGVyVGl0bGUnKS5oaWRlKDApO1xyXG59XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgJCgnLkdlb1Byb3ZTZWxlY3QnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBsZXQgcHJvdl9pZCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgZ2V0R2VvTG9jcyhwcm92X2lkKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qXHJcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG58IE1JWCBGVU5DVElPTlNcclxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiovXHJcblxyXG53aW5kb3cuY2xvc2VFbGVtZW50ID0gZnVuY3Rpb24oc2VsZWN0b3IpXHJcbntcclxuICAgICQoc2VsZWN0b3IpLmhpZGUoMTAwKTtcclxufVxyXG5cclxud2luZG93LmdldFBhcmFtID0gZnVuY3Rpb24ocGFyYW1ldGVyTmFtZSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IG51bGwsXHJcbiAgICAgICAgdG1wID0gW107XHJcbiAgICBsb2NhdGlvbi5zZWFyY2hcclxuICAgICAgICAuc3Vic3RyKDEpXHJcbiAgICAgICAgLnNwbGl0KFwiJlwiKVxyXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgdG1wID0gaXRlbS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgaWYgKHRtcFswXSA9PT0gcGFyYW1ldGVyTmFtZSkgcmVzdWx0ID0gZGVjb2RlVVJJQ29tcG9uZW50KHRtcFsxXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG53aW5kb3cuZ2V0UGFyYW1zID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgICB2YXIgcGFyYW1zID0ge307XHJcblx0dmFyIHBhcnNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuXHRwYXJzZXIuaHJlZiA9IHVybDtcclxuXHR2YXIgcXVlcnkgPSBwYXJzZXIuc2VhcmNoLnN1YnN0cmluZygxKTtcclxuXHR2YXIgdmFycyA9IHF1ZXJ5LnNwbGl0KCcmJyk7XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHR2YXIgcGFpciA9IHZhcnNbaV0uc3BsaXQoJz0nKTtcclxuXHRcdHBhcmFtc1twYWlyWzBdXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcclxuXHR9XHJcblx0cmV0dXJuIHBhcmFtcztcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9yZXNvdXJjZXMvYXNzZXRzL2pzL3N0b3JlL3NjcmlwdHMuanMiXSwic291cmNlUm9vdCI6IiJ9