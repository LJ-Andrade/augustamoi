!function(e){var o={};function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,o,t){a.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:t})},a.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(o,"a",o),o},a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},a.p="/",a(a.s=60)}({60:function(e,o,a){e.exports=a(61)},61:function(e,o){function a(e,o){$(".TotalCartItems").html(e),$(".CartSubTotal").html(o),$("#SideContainerItemsFixed").load(window.location.href+" #SideContainerItemsFixed"),$("#SideContainerItemsFloating").load(window.location.href+" #SideContainerItemsFloating"),$(".TotalCartItemsSidebar").load(window.location.href+" .TotalCartItemsSidebar"),$(".AvailableStock").load(window.location.href+" .AvailableStock")}$("#navfull-top-btn, #navfull-bottom-btn").click(function(){toggleNav()}),window.toggleNav=function(){var e=$(".MobileNavigation"),o=$("body"),a=$("#navfull-top-btn"),t=$("#navfull-bottom-btn"),n=$(".content-effect");e.hasClass("navfull-active")?(e.removeClass("navfull-active"),a.removeClass("navfull-top-active"),t.removeClass("navfull-bottom-active"),o.css("overflow","auto"),n.hide()):(e.addClass("navfull-active"),a.addClass("navfull-top-active"),t.addClass("navfull-bottom-active"),o.css("overflow","hidden"),n.fadeIn(500))},$(".loader-on-change").on("change",function(){return $("#full-loader").removeClass("Hidden"),!0}),$(".loader-on-submit").on("submit",function(){return $("#full-loader").removeClass("Hidden"),!0}),$(".dont-submit-on-enter, .dson").keypress(function(e){if(console.log("ENTER"),13==e.which)return!1;13==e.which&&e.preventDefault()}),window.loaderBars=function(e){var o=$("#LoaderBars");e?o.removeClass("Hidden"):o.addClass("Hidden")},window.collapseFilter=function(e){var o=e.siblings("ul");o.hasClass("collapsed")?(o.removeClass("collapsed"),o.show(100),e.html("-")):(o.addClass("collapsed"),o.hide(100),e.html("+"))},$(".InputBtnQ").on("change keyup",function(){var e=$(this).siblings(".ArticlePrice").val(),o=$(this).val(),a=e*o,t=$(this).parent().parent().parent().siblings(".TotalItemPrice");console.log(e,o,a),function(e,o,a){e.siblings(".InputBtnQ").removeClass("Hidden"),o.html("$ "+a)}($(this),t,a)}),$("#MainOverlay").click(function(){checkoutSidebar("hide")}),window.checkoutSidebar=function(e){var o=$(".CheckoutCart"),a=$(".main-wrapper"),t=function(){o.addClass("active"),a.addClass("allow-sidebar")},n=function(){o.removeClass("active"),a.removeClass("allow-sidebar")};if(void 0==e)o.hasClass("active")?n():t();else{if("show"==e)return t(),!1;if("hide"==e)return n(),!1}},window.openCheckoutDesktop=function(){return $(window).width()>768&&checkoutSidebar("show"),!1},window.openFilters=function(){var e=$("#SearchFilters"),o=$("#SearchFiltersTrigger");e.hasClass("active")?(e.removeClass("active"),o.show()):(e.addClass("active"),o.hide())},window.sumAllItems=function(){sum=0,$(".TotalItemPrice").each(function(e){sum+=parseInt($(this).html())}),$(".SubTotal").html(sum)},window.sumDivs=function(e,o){var a=0;e.each(function(){a+=parseFloat($(this).text())}),o.text(a)},window.checkVariantStock=function(){var e=$("#AddToCartForm"),o=e.serialize(),a=!1,t=$("#AddToCartFormBtn");return $.ajax({url:e.data("route"),method:"GET",dataType:"JSON",async:!1,data:o,success:function(e){1==e.response?("0"==e.message?($(".AvailableStock").html("No hay stock disponible"),t.prop("disabled",!0)):($(".AvailableStock").html("Stock disponible: "+e.message),t.prop("disabled",!1),a=!0),$("#MaxQuantity").prop("max",e.message)):($(".AvailableStock").html(e.message),t.prop("disabled",!0))},error:function(e){$("#Error").html(e.responseText),location.reload(),a=!1,t.prop("disabled",!0),console.log(e),console.log("Entro en error 2")}}),a},window.setItemsData=function(){itemData=[],$(".Item-Data").each(function(){var e=$(this).data("id"),o=$(this).data("price"),a=$(this).data("variant"),t=$(this).val();item={},item.id=e,item.variant_id=a,item.price=o,item.quantity=t,total=o*t,$("."+e+"-TotalItemPrice").html(total),itemData.push(item)}),sumAllItems(),$("#Items-Data").val(itemData)},window.addToCart=function(e,o){loaderBars(!0),$.ajax({url:e,method:"POST",dataType:"JSON",data:o,success:function(e){"success"==e.response?($(".AvailableStock").html("Stock disponible: "+e.newStock),toast_success("Ok!",e.message,"bottomCenter","",2500),a(e.totalCartItems,e.cartSubTotal),setItemsData(),setTimeout(function(){setItemsData(),sumAllItems()},100)):"warning"==e.response&&toast_success("Ups!",e.message,"bottomCenter")},error:function(e){console.log("Error en addtoCart()"),console.log(e)},complete:function(){loaderBars(!1)}})},window.removeFromCart=function(e,o,t,n,s,l){loaderBars(!0),$.ajax({url:e,method:"POST",dataType:"JSON",data:{cartItemId:o,variantId:t,quantity:n,action:l,method:"ajax"},success:function(e){"cart-removed"==e.response?(a(e.totalCartItems,e.cartSubTotal),window.location=window.location.href.split("?")[0],setItemsData()):"success"==e.response&&($(s).hide(100),$(s).remove(),a(e.totalCartItems,e.cartSubTotal),setItemsData())},error:function(e){console.log("Error en removeFromCart()"),console.log(e),location.reload()},complete:function(){loaderBars(!1)}})},window.submitCartToCheckout=function(e,o,a,t){$.ajax({url:e,method:"POST",dataType:"JSON",data:{data:a,action:t},success:function(e){console.log(e),"success"==e.response?(console.log(o),"reload"==o?window.location=window.location.href.split("?")[0]+"?checkout-on":window.location.href=o):(console.log("Error en submitForm"),console.log(e),toast_error("",e.message,"bottomCenter",""),$(".SideContainerError").html(e.message))},error:function(e){console.log("Error en submitForm()"),location.reload(),console.log(e)}})},window.validateAndSetCoupon=function(e,o,a){var t=$("#CouponDiv"),n=$("#SettedCoupon");console.log(o,a),$.ajax({url:e,method:"POST",dataType:"JSON",data:{code:o,cartid:a},beforeSend:function(){console.log("Comprobando cupón..."),$(".CouponLoader").removeClass("Hidden")},success:function(e){1==e.response?($("#CouponValidationMessage").html("Cupón aceptado !"),t.hide(200,function(){n.removeClass("Hidden")}),location.reload()):null==e.response&&$("#CouponValidationMessage").html(e.message)},error:function(e){$("#CouponValidationMessage").html(e.responseText),console.log(e)},complete:function(){$(".CouponLoader").addClass("Hidden")}})},window.addArticleToFavs=function(e,o,a,t,n){$.ajax({url:e,method:"POST",dataType:"JSON",data:{fav_id:o,article_id:a},success:function(e){if(1==e.response&&"added"==e.result)switch(t){case"reload":location.reload();break;case"show":n.removeClass("fav-icon-nofav"),n.addClass("fav-icon-isfav"),toast_success("Ok!","Producto agregado a favoritos","bottomCenter","",1e3);break;case"none":console.log("Actualizado - Sin Acción");default:console.log("No hay acción")}else 1==e.response&&"removed"==e.result&&(n.addClass("fav-icon-nofav"),n.removeClass("fav-icon-isfav"),toast_success("Ok!","Producto eliminado de favoritos","bottomCenter","",1e3));var o;(o=e.favsCount)>0?($(".FavMainIcon").removeClass("far"),$(".FavMainIcon").addClass("fa")):0==o?($(".FavMainIcon").removeClass("fa"),$(".FavMainIcon").addClass("far")):($(".FavMainIcon").removeClass("fa"),$(".FavMainIcon").removeClass("far"),$(".FavMainIcon").addClass("fa"),console.log("Error en setFavsTotalIcon()"))},error:function(e){$("#Error").html(e.responseText),console.log(e)}})},window.removeArticleFromFavs=function(e,o,a){var t=a;$.ajax({url:e,method:"POST",dataType:"JSON",data:{fav_id:o},success:function(e){if($("#Error").html(e.responseText),console.log(e),1==e.response)switch(console.log(t),t){case"reload":toast_success("Ok!","Producto eliminado de favoritos","bottomCenter","reload",1e3);break;default:console.log("No hay acción")}else console.log(e)},error:function(e){console.log(e)}})},window.removeAllArticlesFromFavs=function(e,o,a){$.ajax({url:e,method:"POST",dataType:"JSON",data:{customer_id:o},success:function(e){if(console.log(e),1==e.response)switch(a){case"reload":location.reload();break;default:console.log("No hay acción")}else $("#Error").html(e.message.errorInfo),console.log(e)},error:function(e){console.log(e)}})},$("#ResellerBox").hide(),window.openResellerRegistration=function(){$("#IsResellerCheckbox").prop("checked",!0),$(".IfResellerEnable").prop("disabled",!1),$("#ResellerBox").show(100),$("#ResellerCTA").hide(0),$(".NormaClientTitle").hide(0),$(".ResellerTitle").show(0)},window.closeResellerRegistration=function(){$("#IsResellerCheckbox").prop("checked",!1),$(".IfResellerEnable").prop("disabled",!0),$("#ResellerBox").hide(0),$("#ResellerCTA").show(100),$(".NormaClientTitle").show(0),$(".ResellerTitle").hide(0)},$(document).ready(function(){$(".GeoProvSelect").on("change",function(){var e=$(this).val();getGeoLocs(e)})}),window.closeElement=function(e){$(e).hide(100)},window.getParam=function(e){var o=null,a=[];return location.search.substr(1).split("&").forEach(function(t){(a=t.split("="))[0]===e&&(o=decodeURIComponent(a[1]))}),o},window.getParams=function(e){var o={},a=document.createElement("a");a.href=e;for(var t=a.search.substring(1).split("&"),n=0;n<t.length;n++){var s=t[n].split("=");o[s[0]]=decodeURIComponent(s[1])}return o}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYWE5ZWJmYmEwMmEwYWYyYjkwNDgiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2Fzc2V0cy9qcy9zdG9yZS9zY3JpcHRzLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ1cGRhdGVUb3RhbHMiLCJ0b3RhbENhcnRJdGVtcyIsImNhcnRTdWJ0b3RhbCIsIiQiLCJodG1sIiwibG9hZCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImNsaWNrIiwidG9nZ2xlTmF2IiwibmF2IiwiYm9keSIsInRyaWdnZXIiLCJib3R0b21UcmlnZ2VyIiwiY29udGVudFRleHQiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiY3NzIiwiaGlkZSIsImFkZENsYXNzIiwiZmFkZUluIiwib24iLCJrZXlwcmVzcyIsImUiLCJjb25zb2xlIiwibG9nIiwid2hpY2giLCJwcmV2ZW50RGVmYXVsdCIsImxvYWRlckJhcnMiLCJhY3Rpb24iLCJsb2FkZXIiLCJjb2xsYXBzZUZpbHRlciIsImVsZW0iLCJmaWx0ZXIiLCJzaWJsaW5ncyIsInNob3ciLCJ2YWx1ZSIsInRoaXMiLCJ2YWwiLCJxdWFudGl0eSIsIm5ld1ZhbHVlIiwibmV3UHJpY2VUYXJnZXQiLCJwYXJlbnQiLCJtb2RpZnlDYXJ0SXRlbVEiLCJjaGVja291dFNpZGViYXIiLCJzdGF0ZSIsInNpZGViYXIiLCJ3cmFwcGVyIiwidW5kZWZpbmVkIiwib3BlbkNoZWNrb3V0RGVza3RvcCIsIndpZHRoIiwib3BlbkZpbHRlcnMiLCJmaWx0ZXJzIiwic3VtQWxsSXRlbXMiLCJzdW0iLCJlYWNoIiwiaW5kZXgiLCJwYXJzZUludCIsInN1bURpdnMiLCJvcmlnaW5zIiwidGFyZ2V0IiwicGFyc2VGbG9hdCIsInRleHQiLCJjaGVja1ZhcmlhbnRTdG9jayIsImZvcm0iLCJkYXRhIiwic2VyaWFsaXplIiwiYWxsb3dTdWJtaXQiLCJzdWJtaXRCdXR0b24iLCJhamF4IiwidXJsIiwibWV0aG9kIiwiZGF0YVR5cGUiLCJhc3luYyIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsIm1lc3NhZ2UiLCJwcm9wIiwiZXJyb3IiLCJyZXNwb25zZVRleHQiLCJyZWxvYWQiLCJzZXRJdGVtc0RhdGEiLCJpdGVtRGF0YSIsImlkIiwicHJpY2UiLCJ2YXJpYW50X2lkIiwiaXRlbSIsInRvdGFsIiwicHVzaCIsImFkZFRvQ2FydCIsInJvdXRlIiwibmV3U3RvY2siLCJ0b2FzdF9zdWNjZXNzIiwiY2FydFN1YlRvdGFsIiwic2V0VGltZW91dCIsImNvbXBsZXRlIiwicmVtb3ZlRnJvbUNhcnQiLCJjYXJ0SXRlbUlkIiwidmFyaWFudElkIiwiZGl2Iiwic3BsaXQiLCJyZW1vdmUiLCJzdWJtaXRDYXJ0VG9DaGVja291dCIsInRvYXN0X2Vycm9yIiwidmFsaWRhdGVBbmRTZXRDb3Vwb24iLCJjb2RlIiwiY2FydGlkIiwiY291cG9uRGl2IiwiY291cG9uU2V0IiwiYmVmb3JlU2VuZCIsImFkZEFydGljbGVUb0ZhdnMiLCJmYXZpZCIsImFydGljbGVpZCIsImRpc3BsYXlCdXR0b24iLCJmYXZfaWQiLCJhcnRpY2xlX2lkIiwicmVzdWx0IiwiZmF2cyIsImZhdnNDb3VudCIsInJlbW92ZUFydGljbGVGcm9tRmF2cyIsImRvYWN0aW9uIiwicmVtb3ZlQWxsQXJ0aWNsZXNGcm9tRmF2cyIsImN1c3RvbWVyaWQiLCJjdXN0b21lcl9pZCIsIm9wZW5SZXNlbGxlclJlZ2lzdHJhdGlvbiIsImNsb3NlUmVzZWxsZXJSZWdpc3RyYXRpb24iLCJkb2N1bWVudCIsInJlYWR5IiwicHJvdl9pZCIsImdldEdlb0xvY3MiLCJjbG9zZUVsZW1lbnQiLCJzZWxlY3RvciIsImdldFBhcmFtIiwicGFyYW1ldGVyTmFtZSIsInRtcCIsInNlYXJjaCIsInN1YnN0ciIsImZvckVhY2giLCJkZWNvZGVVUklDb21wb25lbnQiLCJnZXRQYXJhbXMiLCJwYXJhbXMiLCJwYXJzZXIiLCJjcmVhdGVFbGVtZW50IiwidmFycyIsInN1YnN0cmluZyIsImxlbmd0aCIsInBhaXIiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWhCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQWlCLFdBQ0EsV0FBMkIsT0FBQWpCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFRLEVBQUFDLEdBQXNELE9BQUFSLE9BQUFTLFVBQUFDLGVBQUFqQixLQUFBYyxFQUFBQyxJQUd0RHRCLEVBQUF5QixFQUFBLElBR0F6QixJQUFBMEIsRUFBQSwyRENtU0EsU0FBU0MsRUFBYUMsRUFBZ0JD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QyxNQUFNQyxNQUN0QjJGLFdBQVdELE9BVW5CM0gsT0FBTzZILGFBQWUsU0FBU0MsR0FFM0JqSSxFQUFFaUksR0FBVWpILEtBQUssTUFHckJiLE9BQU8rSCxTQUFXLFNBQVNDLEdBQ3ZCLElBQUlqQixFQUFTLEtBQ1RrQixLQVFKLE9BUEFoSSxTQUFTaUksT0FDSkMsT0FBTyxHQUNQcEMsTUFBTSxLQUNOcUMsUUFBUSxTQUFVbkQsSUFDbkJnRCxFQUFNaEQsRUFBS2MsTUFBTSxNQUNULEtBQU9pQyxJQUFlakIsRUFBU3NCLG1CQUFtQkosRUFBSSxPQUUzRGxCLEdBR1gvRyxPQUFPc0ksVUFBWSxTQUFTckUsR0FDeEIsSUFBSXNFLEtBQ0hDLEVBQVNmLFNBQVNnQixjQUFjLEtBQ3BDRCxFQUFPdEksS0FBTytELEVBR2QsSUFGQSxJQUNJeUUsRUFEUUYsRUFBT04sT0FBT1MsVUFBVSxHQUNuQjVDLE1BQU0sS0FDZDVILEVBQUksRUFBR0EsRUFBSXVLLEVBQUtFLE9BQVF6SyxJQUFLLENBQ3JDLElBQUkwSyxFQUFPSCxFQUFLdkssR0FBRzRILE1BQU0sS0FDekJ3QyxFQUFPTSxFQUFLLElBQU1SLG1CQUFtQlEsRUFBSyxJQUUzQyxPQUFPTiIsImZpbGUiOiIvanMvc2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA2MCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgYWE5ZWJmYmEwMmEwYWYyYjkwNDgiLCIvL1xyXG4vLyB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gfCBOYXZpZ2F0aW9uXHJcbi8vIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL1xyXG4kKCcjbmF2ZnVsbC10b3AtYnRuLCAjbmF2ZnVsbC1ib3R0b20tYnRuJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICB0b2dnbGVOYXYoKTtcclxufSk7XHJcblxyXG53aW5kb3cudG9nZ2xlTmF2ID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICBjb25zdCBuYXYgPSAkKCcuTW9iaWxlTmF2aWdhdGlvbicpO1xyXG4gICAgY29uc3QgYm9keSA9ICQoJ2JvZHknKTtcclxuICAgIGNvbnN0IHRyaWdnZXIgPSAkKCcjbmF2ZnVsbC10b3AtYnRuJyk7XHJcbiAgICBjb25zdCBib3R0b21UcmlnZ2VyID0gJCgnI25hdmZ1bGwtYm90dG9tLWJ0bicpO1xyXG4gICAgY29uc3QgY29udGVudFRleHQgPSAkKCcuY29udGVudC1lZmZlY3QnKTtcclxuXHJcbiAgICBpZihuYXYuaGFzQ2xhc3MoJ25hdmZ1bGwtYWN0aXZlJykpXHJcbiAgICB7XHJcbiAgICAgICAgbmF2LnJlbW92ZUNsYXNzKCduYXZmdWxsLWFjdGl2ZScpO1xyXG4gICAgICAgIHRyaWdnZXIucmVtb3ZlQ2xhc3MoJ25hdmZ1bGwtdG9wLWFjdGl2ZScpO1xyXG4gICAgICAgIGJvdHRvbVRyaWdnZXIucmVtb3ZlQ2xhc3MoJ25hdmZ1bGwtYm90dG9tLWFjdGl2ZScpO1xyXG4gICAgICAgIGJvZHkuY3NzKCdvdmVyZmxvdycsJ2F1dG8nKTtcclxuICAgICAgICBjb250ZW50VGV4dC5oaWRlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5hdi5hZGRDbGFzcygnbmF2ZnVsbC1hY3RpdmUnKTtcclxuICAgICAgICB0cmlnZ2VyLmFkZENsYXNzKCduYXZmdWxsLXRvcC1hY3RpdmUnKTtcclxuICAgICAgICBib3R0b21UcmlnZ2VyLmFkZENsYXNzKCduYXZmdWxsLWJvdHRvbS1hY3RpdmUnKTtcclxuICAgICAgICBib2R5LmNzcygnb3ZlcmZsb3cnLCdoaWRkZW4nKTtcclxuICAgICAgICBjb250ZW50VGV4dC5mYWRlSW4oNTAwKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8vIExvYWRlcnNcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4kKFwiLmxvYWRlci1vbi1jaGFuZ2VcIikub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICQoJyNmdWxsLWxvYWRlcicpLnJlbW92ZUNsYXNzKCdIaWRkZW4nKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG59KTtcclxuXHJcbiQoXCIubG9hZGVyLW9uLXN1Ym1pdFwiKS5vbignc3VibWl0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnI2Z1bGwtbG9hZGVyJykucmVtb3ZlQ2xhc3MoJ0hpZGRlbicpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn0pO1xyXG5cclxuJCgnLmRvbnQtc3VibWl0LW9uLWVudGVyLCAuZHNvbicpLmtleXByZXNzKGZ1bmN0aW9uIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkVOVEVSXCIpO1xyXG4gICAgaWYgKGUud2hpY2ggPT0gMTMpIHJldHVybiBmYWxzZTtcclxuICAgIGlmIChlLndoaWNoID09IDEzKSBlLnByZXZlbnREZWZhdWx0KCk7XHJcbn0pO1xyXG5cclxud2luZG93LmxvYWRlckJhcnMgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICBcclxuICAgIGNvbnN0IGxvYWRlciA9ICQoJyNMb2FkZXJCYXJzJyk7XHJcblxyXG4gICAgaWYoYWN0aW9uKSB7XHJcbiAgICAgICAgbG9hZGVyLnJlbW92ZUNsYXNzKCdIaWRkZW4nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbG9hZGVyLmFkZENsYXNzKCdIaWRkZW4nKTtcclxuICAgIH1cclxuXHJcbn07XHJcblxyXG4vLyBTdG9yZSBGaWx0ZXJzXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbndpbmRvdy5jb2xsYXBzZUZpbHRlciA9IGZ1bmN0aW9uKGVsZW0pIHtcclxuICAgIGNvbnN0IGZpbHRlciA9IGVsZW0uc2libGluZ3MoJ3VsJyk7XHJcbiAgICBpZihmaWx0ZXIuaGFzQ2xhc3MoJ2NvbGxhcHNlZCcpKVxyXG4gICAge1xyXG4gICAgICAgIGZpbHRlci5yZW1vdmVDbGFzcygnY29sbGFwc2VkJyk7XHJcbiAgICAgICAgZmlsdGVyLnNob3coMTAwKTtcclxuICAgICAgICBlbGVtLmh0bWwoJy0nKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICBmaWx0ZXIuYWRkQ2xhc3MoJ2NvbGxhcHNlZCcpO1xyXG4gICAgICAgIGZpbHRlci5oaWRlKDEwMCk7XHJcbiAgICAgICAgZWxlbS5odG1sKCcrJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vLyBNb2RpZnkgY2FydCBpdGVtIHF1YW50aXR5IFxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiQoJy5JbnB1dEJ0blEnKS5vbignY2hhbmdlIGtleXVwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gIE9yaWdpbmFsIEFydGljbGUgUHJpY2VcclxuICAgIGxldCB2YWx1ZSA9ICQodGhpcykuc2libGluZ3MoJy5BcnRpY2xlUHJpY2UnKS52YWwoKTtcclxuICAgIC8vIFF1YW50aXR5XHJcbiAgICBsZXQgcXVhbnRpdHkgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgLy8gTmVyIFZhbHVlXHJcbiAgICBsZXQgbmV3VmFsdWUgPSAodmFsdWUgKiBxdWFudGl0eSk7XHJcbiAgICAvLyBOZXcgUHJpY2UgVGFyZ2V0XHJcbiAgICBsZXQgbmV3UHJpY2VUYXJnZXQgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuVG90YWxJdGVtUHJpY2UnKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyh2YWx1ZSwgcXVhbnRpdHksIG5ld1ZhbHVlKTtcclxuICAgIG1vZGlmeUNhcnRJdGVtUSgkKHRoaXMpLCBuZXdQcmljZVRhcmdldCwgbmV3VmFsdWUpO1xyXG59KVxyXG5cclxuZnVuY3Rpb24gbW9kaWZ5Q2FydEl0ZW1RKGUsIG5ld1ByaWNlVGFyZ2V0LCBuZXdWYWx1ZSkge1xyXG4gICAgZS5zaWJsaW5ncygnLklucHV0QnRuUScpLnJlbW92ZUNsYXNzKCdIaWRkZW4nKTtcclxuICAgIG5ld1ByaWNlVGFyZ2V0Lmh0bWwoJyQgJyArIG5ld1ZhbHVlKTtcclxufVxyXG5cclxuXHJcbiQoJyNNYWluT3ZlcmxheScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICBjaGVja291dFNpZGViYXIoJ2hpZGUnKTtcclxufSlcclxuLy8gQ2hlY2tvdXQgc2lkZWJhclxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHRcdFxyXG53aW5kb3cuY2hlY2tvdXRTaWRlYmFyID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcblxyXG4gICAgY29uc3Qgc2lkZWJhciA9ICQoJy5DaGVja291dENhcnQnKTtcclxuICAgIGNvbnN0IHdyYXBwZXIgPSAkKCcubWFpbi13cmFwcGVyJyk7XHJcblxyXG4gICAgY29uc3Qgc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzaWRlYmFyLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB3cmFwcGVyLmFkZENsYXNzKCdhbGxvdy1zaWRlYmFyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzaWRlYmFyLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB3cmFwcGVyLnJlbW92ZUNsYXNzKCdhbGxvdy1zaWRlYmFyJyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChzdGF0ZSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAoc2lkZWJhci5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgaGlkZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09ICdzaG93Jykge1xyXG4gICAgICAgIHNob3coKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09ICdoaWRlJykge1xyXG4gICAgICAgIGhpZGUoKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxud2luZG93Lm9wZW5DaGVja291dERlc2t0b3AgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDc2OCkge1xyXG4gICAgICAgIGNoZWNrb3V0U2lkZWJhcignc2hvdycpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG53aW5kb3cub3BlbkZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBmaWx0ZXJzID0gJCgnI1NlYXJjaEZpbHRlcnMnKTtcclxuICAgIGNvbnN0IHRyaWdnZXIgPSAkKCcjU2VhcmNoRmlsdGVyc1RyaWdnZXInKTtcclxuICAgIGlmKGZpbHRlcnMuaGFzQ2xhc3MoJ2FjdGl2ZScpKVxyXG4gICAge1xyXG4gICAgICAgIGZpbHRlcnMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIHRyaWdnZXIuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIGZpbHRlcnMuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIHRyaWdnZXIuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcbi8qXHJcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG58IENBUlRcclxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiovXHJcblxyXG5cclxud2luZG93LnN1bUFsbEl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgc3VtID0gMDtcclxuICAgICQoJy5Ub3RhbEl0ZW1QcmljZScpLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgc3VtICs9IHBhcnNlSW50KCQodGhpcykuaHRtbCgpKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLlN1YlRvdGFsJykuaHRtbChzdW0pO1xyXG59XHJcblxyXG5cclxuLy8gU3VtIGRpdnMgdGV4dFxyXG53aW5kb3cuc3VtRGl2cyA9IGZ1bmN0aW9uIChvcmlnaW5zLCB0YXJnZXQpIHtcclxuICAgIGxldCBzdW0gPSAwO1xyXG4gICAgb3JpZ2lucy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzdW0gKz0gcGFyc2VGbG9hdCgkKHRoaXMpLnRleHQoKSk7XHJcbiAgICB9KTtcclxuICAgIHRhcmdldC50ZXh0KHN1bSk7XHJcbn1cclxuXHJcblxyXG4vLyBDaGVjayBwcm9kdWN0IHZhcmlhbnQgc3RvY2tcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG53aW5kb3cuY2hlY2tWYXJpYW50U3RvY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIGxldCBmb3JtID0gJCgnI0FkZFRvQ2FydEZvcm0nKTtcclxuICAgIGxldCBkYXRhID0gZm9ybS5zZXJpYWxpemUoKTtcclxuICAgIGxldCBhbGxvd1N1Ym1pdCA9IGZhbHNlO1xyXG4gICAgbGV0IHN1Ym1pdEJ1dHRvbiA9ICAkKCcjQWRkVG9DYXJ0Rm9ybUJ0bicpO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IGZvcm0uZGF0YSgncm91dGUnKSxcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXHJcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYoZGF0YS5yZXNwb25zZSA9PSB0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLm1lc3NhZ2UgPT0gJzAnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLkF2YWlsYWJsZVN0b2NrJykuaHRtbChcIk5vIGhheSBzdG9jayBkaXNwb25pYmxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXRCdXR0b24ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5BdmFpbGFibGVTdG9jaycpLmh0bWwoXCJTdG9jayBkaXNwb25pYmxlOiBcIiArIGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dTdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkVudHJvIGVuIFNVQ0NFU1NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnI01heFF1YW50aXR5JykucHJvcChcIm1heFwiLCBkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKCcjRXJyb3InKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgICQoJy5BdmFpbGFibGVTdG9jaycpLmh0bWwoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgJCgnI0Vycm9yJykuaHRtbChkYXRhLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICBhbGxvd1N1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzdWJtaXRCdXR0b24ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRW50cm8gZW4gZXJyb3IgMlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBhbGxvd1N1Ym1pdDtcclxufVxyXG5cclxuLy8gU2V0IGNhcnQgaXRlbXMgSlNPTlxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbndpbmRvdy5zZXRJdGVtc0RhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpdGVtRGF0YSA9IFtdO1xyXG5cclxuICAgICQoJy5JdGVtLURhdGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgaWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgbGV0IHByaWNlID0gJCh0aGlzKS5kYXRhKCdwcmljZScpO1xyXG4gICAgICAgIGxldCB2YXJpYW50X2lkID0gJCh0aGlzKS5kYXRhKCd2YXJpYW50Jyk7XHJcbiAgICAgICAgbGV0IHF1YW50aXR5ID0gJCh0aGlzKS52YWwoKTtcclxuXHJcbiAgICAgICAgaXRlbSA9IHt9O1xyXG4gICAgICAgIGl0ZW1bJ2lkJ10gPSBpZDtcclxuICAgICAgICBpdGVtWyd2YXJpYW50X2lkJ10gPSB2YXJpYW50X2lkO1xyXG4gICAgICAgIGl0ZW1bJ3ByaWNlJ10gPSBwcmljZTtcclxuICAgICAgICBpdGVtWydxdWFudGl0eSddID0gcXVhbnRpdHk7XHJcbiAgICAgICAgLy8gVXBkYXRlIGRpc3BsYXkgdG90YWwgaXRlbSBwcmljZVxyXG4gICAgICAgIHRvdGFsID0gcHJpY2UgKiBxdWFudGl0eTtcclxuICAgICAgICAkKCcuJyArIGlkICsgJy1Ub3RhbEl0ZW1QcmljZScpLmh0bWwodG90YWwpO1xyXG5cclxuICAgICAgICBpdGVtRGF0YS5wdXNoKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgICAvLyBVcGRhdGUgVG90YWxcclxuICAgIC8vIGNvbnNvbGUuaW5mbyhpdGVtRGF0YSk7XHJcbiAgICBzdW1BbGxJdGVtcygpO1xyXG4gICAgJCgnI0l0ZW1zLURhdGEnKS52YWwoaXRlbURhdGEpO1xyXG59XHJcblxyXG4vLyBBZGQgcHJvZHVjdCB0byBjYXJ0XHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxud2luZG93LmFkZFRvQ2FydCA9IGZ1bmN0aW9uIChyb3V0ZSwgZGF0YSkge1xyXG4gICAgXHJcbiAgICBsb2FkZXJCYXJzKHRydWUpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiByb3V0ZSxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBkYXRhVHlwZTogJ0pTT04nLFxyXG4gICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnJlc3BvbnNlID09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAkKCcuQXZhaWxhYmxlU3RvY2snKS5odG1sKFwiU3RvY2sgZGlzcG9uaWJsZTogXCIgKyBkYXRhLm5ld1N0b2NrKTtcclxuICAgICAgICAgICAgICAgIHRvYXN0X3N1Y2Nlc3MoJ09rIScsIGRhdGEubWVzc2FnZSwgJ2JvdHRvbUNlbnRlcicsICcnLCAyNTAwKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRvdGFscyhkYXRhLnRvdGFsQ2FydEl0ZW1zLCBkYXRhLmNhcnRTdWJUb3RhbCk7XHJcbiAgICAgICAgICAgICAgICBzZXRJdGVtc0RhdGEoKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEl0ZW1zRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN1bUFsbEl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb3BlbkNoZWNrb3V0RGVza3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnJlc3BvbnNlID09ICd3YXJuaW5nJykge1xyXG4gICAgICAgICAgICAgICAgdG9hc3Rfc3VjY2VzcygnVXBzIScsIGRhdGEubWVzc2FnZSwgJ2JvdHRvbUNlbnRlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gJCgnI0Vycm9yJykuaHRtbChkYXRhLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZW4gYWRkdG9DYXJ0KClcIik7XHJcbiAgICAgICAgICAgIC8vIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbG9hZGVyQmFycyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG4vLyBSZW1vdmUgcHJvZHVjdCBmcm9tIGNhcnRcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG53aW5kb3cucmVtb3ZlRnJvbUNhcnQgPSBmdW5jdGlvbiAocm91dGUsIGNhcnRJdGVtSWQsIHZhcmlhbnRJZCwgcXVhbnRpdHksIGRpdiwgYWN0aW9uKSB7XHJcblxyXG4gICAgbG9hZGVyQmFycyh0cnVlKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogcm91dGUsXHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdKU09OJyxcclxuICAgICAgICBkYXRhOiB7IGNhcnRJdGVtSWQ6IGNhcnRJdGVtSWQsIHZhcmlhbnRJZDogdmFyaWFudElkLCBxdWFudGl0eTogcXVhbnRpdHksIGFjdGlvbjogYWN0aW9uLCBtZXRob2Q6ICdhamF4JyB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnJlc3BvbnNlID09ICdjYXJ0LXJlbW92ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRvdGFscyhkYXRhLnRvdGFsQ2FydEl0ZW1zLCBkYXRhLmNhcnRTdWJUb3RhbCk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdChcIj9cIilbMF07XHJcbiAgICAgICAgICAgICAgICBzZXRJdGVtc0RhdGEoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnJlc3BvbnNlID09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICAgICAgJChkaXYpLmhpZGUoMTAwKTtcclxuICAgICAgICAgICAgICAgICQoZGl2KS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRvdGFscyhkYXRhLnRvdGFsQ2FydEl0ZW1zLCBkYXRhLmNhcnRTdWJUb3RhbCk7XHJcbiAgICAgICAgICAgICAgICBzZXRJdGVtc0RhdGEoKTtcclxuICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vJCgnI0Vycm9yJykuaHRtbChkYXRhLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZW4gcmVtb3ZlRnJvbUNhcnQoKVwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIC8vIElmIGFuIGVycm9yIHBvcHMgd2hlbiBkZXN0cm95aW5nIGFuIGl0ZW0sIHJlbG9hZCBhbmQgcHJldmVudCBiYWQgbWFnaWNcclxuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsb2FkZXJCYXJzKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlVG90YWxzKHRvdGFsQ2FydEl0ZW1zLCBjYXJ0U3VidG90YWwpIHtcclxuXHJcbiAgICAvLyBMaXZlIFJlbG9hZGluZyBzdHVmZlxyXG4gICAgJChcIi5Ub3RhbENhcnRJdGVtc1wiKS5odG1sKHRvdGFsQ2FydEl0ZW1zKTtcclxuICAgICQoXCIuQ2FydFN1YlRvdGFsXCIpLmh0bWwoY2FydFN1YnRvdGFsKTtcclxuICAgICQoXCIjU2lkZUNvbnRhaW5lckl0ZW1zRml4ZWRcIikubG9hZCh3aW5kb3cubG9jYXRpb24uaHJlZiArIFwiICNTaWRlQ29udGFpbmVySXRlbXNGaXhlZFwiKTtcclxuICAgICQoXCIjU2lkZUNvbnRhaW5lckl0ZW1zRmxvYXRpbmdcIikubG9hZCh3aW5kb3cubG9jYXRpb24uaHJlZiArIFwiICNTaWRlQ29udGFpbmVySXRlbXNGbG9hdGluZ1wiKTtcclxuICAgICQoXCIuVG90YWxDYXJ0SXRlbXNTaWRlYmFyXCIpLmxvYWQod2luZG93LmxvY2F0aW9uLmhyZWYgKyBcIiAuVG90YWxDYXJ0SXRlbXNTaWRlYmFyXCIpO1xyXG4gICAgJChcIi5BdmFpbGFibGVTdG9ja1wiKS5sb2FkKHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgXCIgLkF2YWlsYWJsZVN0b2NrXCIpO1xyXG59XHJcblxyXG4vLyBTdWJtaXQgQ2FydCBGb3JtIHRvIENoZWNrb3V0XHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxud2luZG93LnN1Ym1pdENhcnRUb0NoZWNrb3V0ID0gZnVuY3Rpb24gKHJvdXRlLCB0YXJnZXQsIGRhdGEsIGFjdGlvbikge1xyXG4gICAgLy9jb25zb2xlLmxvZyhcIlJ1dGE6IFwiICsgcm91dGUgKyBcIiBUYXJnZXQ6IFwiICsgdGFyZ2V0ICsgXCIgRGF0YTogXCIgKyBkYXRhICsgXCJBY3Rpb246IFwiKyBhY3Rpb24pO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IHJvdXRlLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXHJcbiAgICAgICAgZGF0YTogeyBkYXRhLCBhY3Rpb246IGFjdGlvbiB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNwb25zZSA9PSAnc3VjY2VzcycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ID09ICdyZWxvYWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVmcmVzaCBwYWdlLCBkZWxldGUgcGFyYW1ldHRlcnMgYW5kIG9wZW4gY2hlY2tvdXQgc2lkZWJhclxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiP1wiKVswXSArIFwiP2NoZWNrb3V0LW9uXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGVuIHN1Ym1pdEZvcm0nKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdG9hc3RfZXJyb3IoJycsIGRhdGEubWVzc2FnZSwgJ2JvdHRvbUNlbnRlcicsICcnKTtcclxuICAgICAgICAgICAgICAgICQoJy5TaWRlQ29udGFpbmVyRXJyb3InKS5odG1sKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKCcjRXJyb3InKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAkKCcjRXJyb3InKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAvLyAkKCcjRXJyb3InKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBlbiBzdWJtaXRGb3JtKClcIik7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgLy8gbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIFZhbGlkYXRlIGFuZCBzZXQgY291cG9uXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxud2luZG93LnZhbGlkYXRlQW5kU2V0Q291cG9uID0gZnVuY3Rpb24gKHJvdXRlLCBjb2RlLCBjYXJ0aWQpIHtcclxuICAgIGxldCBjb3Vwb25EaXYgPSAkKCcjQ291cG9uRGl2Jyk7XHJcbiAgICBsZXQgY291cG9uU2V0ID0gJCgnI1NldHRlZENvdXBvbicpO1xyXG4gICAgY29uc29sZS5sb2coY29kZSwgY2FydGlkKTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiByb3V0ZSxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBkYXRhVHlwZTogJ0pTT04nLFxyXG4gICAgICAgIGRhdGE6IHsgY29kZTogY29kZSwgY2FydGlkOiBjYXJ0aWQgfSxcclxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29tcHJvYmFuZG8gY3Vww7NuLi4uXCIpO1xyXG4gICAgICAgICAgICAkKCcuQ291cG9uTG9hZGVyJykucmVtb3ZlQ2xhc3MoJ0hpZGRlbicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEucmVzcG9uc2UgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgJCgnI0NvdXBvblZhbGlkYXRpb25NZXNzYWdlJykuaHRtbChcIkN1cMOzbiBhY2VwdGFkbyAhXCIpO1xyXG4gICAgICAgICAgICAgICAgY291cG9uRGl2LmhpZGUoMjAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291cG9uU2V0LnJlbW92ZUNsYXNzKCdIaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5yZXNwb25zZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjQ291cG9uVmFsaWRhdGlvbk1lc3NhZ2UnKS5odG1sKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAkKCcjQ291cG9uVmFsaWRhdGlvbk1lc3NhZ2UnKS5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuQ291cG9uTG9hZGVyJykuYWRkQ2xhc3MoJ0hpZGRlbicpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyBGYXZzXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxud2luZG93LmFkZEFydGljbGVUb0ZhdnMgPSBmdW5jdGlvbiAocm91dGUsIGZhdmlkLCBhcnRpY2xlaWQsIGFjdGlvbiwgZGlzcGxheUJ1dHRvbikge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IHJvdXRlLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXHJcbiAgICAgICAgZGF0YTogeyBmYXZfaWQ6IGZhdmlkLCBhcnRpY2xlX2lkOiBhcnRpY2xlaWQgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNwb25zZSA9PSB0cnVlICYmIGRhdGEucmVzdWx0ID09ICdhZGRlZCcpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVsb2FkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3cnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5QnV0dG9uLnJlbW92ZUNsYXNzKCdmYXYtaWNvbi1ub2ZhdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5QnV0dG9uLmFkZENsYXNzKCdmYXYtaWNvbi1pc2ZhdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdF9zdWNjZXNzKCdPayEnLCAnUHJvZHVjdG8gYWdyZWdhZG8gYSBmYXZvcml0b3MnLCAnYm90dG9tQ2VudGVyJywgJycsIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdub25lJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FjdHVhbGl6YWRvIC0gU2luIEFjY2nDs24nKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gaGF5IGFjY2nDs24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5yZXNwb25zZSA9PSB0cnVlICYmIGRhdGEucmVzdWx0ID09ICdyZW1vdmVkJykge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheUJ1dHRvbi5hZGRDbGFzcygnZmF2LWljb24tbm9mYXYnKTtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlCdXR0b24ucmVtb3ZlQ2xhc3MoJ2Zhdi1pY29uLWlzZmF2Jyk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdF9zdWNjZXNzKCdPayEnLCAnUHJvZHVjdG8gZWxpbWluYWRvIGRlIGZhdm9yaXRvcycsICdib3R0b21DZW50ZXInLCAnJywgMTAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0RmF2c1RvdGFsSWNvbihkYXRhLmZhdnNDb3VudCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgJCgnI0Vycm9yJykuaHRtbChkYXRhLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRGYXZzVG90YWxJY29uKGZhdnMpIHtcclxuICAgIGlmIChmYXZzID4gMCkge1xyXG4gICAgICAgICQoJy5GYXZNYWluSWNvbicpLnJlbW92ZUNsYXNzKCdmYXInKTtcclxuICAgICAgICAkKCcuRmF2TWFpbkljb24nKS5hZGRDbGFzcygnZmEnKTtcclxuICAgIH0gZWxzZSBpZiAoZmF2cyA9PSAwKSB7XHJcbiAgICAgICAgJCgnLkZhdk1haW5JY29uJykucmVtb3ZlQ2xhc3MoJ2ZhJyk7XHJcbiAgICAgICAgJCgnLkZhdk1haW5JY29uJykuYWRkQ2xhc3MoJ2ZhcicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcuRmF2TWFpbkljb24nKS5yZW1vdmVDbGFzcygnZmEnKTtcclxuICAgICAgICAkKCcuRmF2TWFpbkljb24nKS5yZW1vdmVDbGFzcygnZmFyJyk7XHJcbiAgICAgICAgJCgnLkZhdk1haW5JY29uJykuYWRkQ2xhc3MoJ2ZhJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBlbiBzZXRGYXZzVG90YWxJY29uKClcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5yZW1vdmVBcnRpY2xlRnJvbUZhdnMgPSBmdW5jdGlvbiAocm91dGUsIGZhdmlkLCBhY3Rpb24pIHtcclxuICAgIHZhciBkb2FjdGlvbiA9IGFjdGlvbjtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiByb3V0ZSxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBkYXRhVHlwZTogJ0pTT04nLFxyXG4gICAgICAgIGRhdGE6IHsgZmF2X2lkOiBmYXZpZCB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICQoJyNFcnJvcicpLmh0bWwoZGF0YS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEucmVzcG9uc2UgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZG9hY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChkb2FjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbG9hZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAncmVsb2FkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3Rfc3VjY2VzcygnT2shJywgJ1Byb2R1Y3RvIGVsaW1pbmFkbyBkZSBmYXZvcml0b3MnLCAnYm90dG9tQ2VudGVyJywgYWN0aW9uLCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIGhheSBhY2Npw7NuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8kKCcjRXJyb3InKS5odG1sKGRhdGEubWVzc2FnZVsnZXJyb3JJbmZvJ10pO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAvLyQoJyNFcnJvcicpLmh0bWwoZGF0YS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxud2luZG93LnJlbW92ZUFsbEFydGljbGVzRnJvbUZhdnMgPSBmdW5jdGlvbiAocm91dGUsIGN1c3RvbWVyaWQsIGFjdGlvbikge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IHJvdXRlLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXHJcbiAgICAgICAgZGF0YTogeyBjdXN0b21lcl9pZDogY3VzdG9tZXJpZCB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAvLyQoJyNFcnJvcicpLmh0bWwoZGF0YS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNwb25zZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbG9hZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gaGF5IGFjY2nDs24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjRXJyb3InKS5odG1sKGRhdGEubWVzc2FnZVsnZXJyb3JJbmZvJ10pO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAvLyQoJyNFcnJvcicpLmh0bWwoZGF0YS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbnwgTE9HSU4gQU5EIFJFR0lTVEVSXHJcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4qL1xyXG5cclxuJCgnI1Jlc2VsbGVyQm94JykuaGlkZSgpO1xyXG5cclxud2luZG93Lm9wZW5SZXNlbGxlclJlZ2lzdHJhdGlvbiA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgJCgnI0lzUmVzZWxsZXJDaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICQoJy5JZlJlc2VsbGVyRW5hYmxlJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAkKCcjUmVzZWxsZXJCb3gnKS5zaG93KDEwMCk7XHJcbiAgICAkKCcjUmVzZWxsZXJDVEEnKS5oaWRlKDApO1xyXG4gICAgJCgnLk5vcm1hQ2xpZW50VGl0bGUnKS5oaWRlKDApO1xyXG4gICAgJCgnLlJlc2VsbGVyVGl0bGUnKS5zaG93KDApO1xyXG59XHJcblxyXG53aW5kb3cuY2xvc2VSZXNlbGxlclJlZ2lzdHJhdGlvbiA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgJCgnI0lzUmVzZWxsZXJDaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAkKCcuSWZSZXNlbGxlckVuYWJsZScpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAkKCcjUmVzZWxsZXJCb3gnKS5oaWRlKDApO1xyXG4gICAgJCgnI1Jlc2VsbGVyQ1RBJykuc2hvdygxMDApO1xyXG4gICAgJCgnLk5vcm1hQ2xpZW50VGl0bGUnKS5zaG93KDApO1xyXG4gICAgJCgnLlJlc2VsbGVyVGl0bGUnKS5oaWRlKDApO1xyXG59XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgJCgnLkdlb1Byb3ZTZWxlY3QnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBsZXQgcHJvdl9pZCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgZ2V0R2VvTG9jcyhwcm92X2lkKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qXHJcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG58IE1JWCBGVU5DVElPTlNcclxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiovXHJcblxyXG53aW5kb3cuY2xvc2VFbGVtZW50ID0gZnVuY3Rpb24oc2VsZWN0b3IpXHJcbntcclxuICAgICQoc2VsZWN0b3IpLmhpZGUoMTAwKTtcclxufVxyXG5cclxud2luZG93LmdldFBhcmFtID0gZnVuY3Rpb24ocGFyYW1ldGVyTmFtZSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IG51bGwsXHJcbiAgICAgICAgdG1wID0gW107XHJcbiAgICBsb2NhdGlvbi5zZWFyY2hcclxuICAgICAgICAuc3Vic3RyKDEpXHJcbiAgICAgICAgLnNwbGl0KFwiJlwiKVxyXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgdG1wID0gaXRlbS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgaWYgKHRtcFswXSA9PT0gcGFyYW1ldGVyTmFtZSkgcmVzdWx0ID0gZGVjb2RlVVJJQ29tcG9uZW50KHRtcFsxXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG53aW5kb3cuZ2V0UGFyYW1zID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgICB2YXIgcGFyYW1zID0ge307XHJcblx0dmFyIHBhcnNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuXHRwYXJzZXIuaHJlZiA9IHVybDtcclxuXHR2YXIgcXVlcnkgPSBwYXJzZXIuc2VhcmNoLnN1YnN0cmluZygxKTtcclxuXHR2YXIgdmFycyA9IHF1ZXJ5LnNwbGl0KCcmJyk7XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHR2YXIgcGFpciA9IHZhcnNbaV0uc3BsaXQoJz0nKTtcclxuXHRcdHBhcmFtc1twYWlyWzBdXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcclxuXHR9XHJcblx0cmV0dXJuIHBhcmFtcztcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9yZXNvdXJjZXMvYXNzZXRzL2pzL3N0b3JlL3NjcmlwdHMuanMiXSwic291cmNlUm9vdCI6IiJ9